<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

    <div class="container mt-10">
        <div></div>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-header">
                        <h4 class="text-center">{{user.first_name}} {{user.last_name}}</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <img src="https://via.placeholder.com/150" class="img-fluid rounded-circle mb-3"
                                    alt="Profile Picture">
                            </div>
                            <div class="col-md-8">
                                <p class="lead">{{user.company_name}}</p>
                                <p>{{user.email}}</p>
                                <div class="mb-3">
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="">
                                       Update Profile
                                    </button>
                                    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        Create Requests
                                    </button>
                                    <button type="button" class="btn btn-danger outlined" onclick="logout()" >
                                        Logout
                                    </button>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <p class="small text-muted">39 Requests</p>
                                    <p class="small text-muted">20 Penging Requests</p>
                                    <p class="small text-muted">19 Rejected Requests</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5>About</h5>
                    </div>
                    <div class="card-body">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam eu sem tempor, varius quam at,
                            luctus dui. Mauris magna metus, dapibus nec turpis vel, semper malesuada ante. Vestibulum id
                            ligula vitae sapien euismod efficitur.</p>
                    </div>
                </div>

                
                <!-- Modal -->
            </div>
        </div>
        <br/>
        <div class="card">
            <div class="card-header">
                <h5>Requests</h5>
            </div>

           
            <div class="card-body">
                <br/>
                <div class="card  table_section ">
                    <h2 class="ml-5  justify-content-center "></h2>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                              <th scope="col">#</th>
                              <th scope="col">User Id</th>
                              <th scope="col">Services</th>
                              <th scope="col">Date</th>
                              <th scope="col">Description</th>
                              <th scope="col">Status</th>
                              <th scope="col">Company name</th>
                              <th scope="col">Company size</th>
                              
                            </tr>
                          </thead>
                          <tbody id="tableBody">
                            {% for request in requests %}
                                <tr>
                                    <th scope="row">{{request.id}}</th>
                                    <td>{{request.connection_type}}</td>
                                    <td>{{request.services}}</td>
                                    <td>{{request.date}}</td>
                                    <td>{{request.description}}</td>
                                    <td>{{request.status}}</td>
                                    <td>{{request.company_name}}</td>
                                    <td>{{request.company_size}}</td>
                                </tr>
                            {% endfor %}
                          </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Create Requests</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{{ url_for('main.create_request') }}" method="POST">
                    <div class="modal-body">

                        <div class="form-floating">
                            <input type="text" name="connection_type" class="form-control" id="floatingInput" placeholder="name@example.com">
                            <label for="floatingInput">Connection Type</label>
                        </div>
                        <br/>
                        <div class="form-floating">
                            <input type="text" name="services" class="form-control" id="floatingPassword" placeholder="Password">
                            <label for="floatingPassword">services</label>
                        </div>
                        <br/>
                        <div class="form-floating">
                            <input type="text" name="description" class="form-control" id="floatingInput" placeholder="name@example.com">
                            <label for="floatingInput">description</label>
                        </div>
                        <br/>
                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
            </form>
            </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function logout() {
            window.location.href = "{{ url_for('main.logout') }}";
        }
        console.log(requests);
    </script>
</body>

</html>